<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="A Beliver in Simple Code">
<meta name="keywords" content="Program|Love|Sports|Photo">
<meta property="og:type" content="website">
<meta property="og:title" content="Lianghao&#39;s Writing">
<meta property="og:url" content="http://zlhhhhhhh.github.io/index.html">
<meta property="og:site_name" content="Lianghao&#39;s Writing">
<meta property="og:description" content="A Beliver in Simple Code">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Lianghao&#39;s Writing">
<meta name="twitter:description" content="A Beliver in Simple Code">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://zlhhhhhhh.github.io/">





  <title>Lianghao's Writing</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Lianghao's Writing</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Live with Passion</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://zlhhhhhhh.github.io/2019/08/27/this-Exploration/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lianghao Zou">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://images.unsplash.com/photo-1537815749002-de6a533c64db?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=845&q=80">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lianghao's Writing">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/27/this-Exploration/" itemprop="url">How to Use Javascript "this"</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-08-27T21:17:55-05:00">
                2019-08-27
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Web-Dev-Learning/" itemprop="url" rel="index">
                    <span itemprop="name">Web Dev Learning</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/08/27/this-Exploration/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/08/27/this-Exploration/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>之后的博文我都会尽力用英文写作，因为之后要准备英文的面试。<br><br>I will write my next blogs in English to prepare myself for an interview.</p>
</blockquote>
<h1 id="this"><a href="#this" class="headerlink" title="this"></a><code>this</code></h1><p>The keyword <code>this</code> may be most confusing feature in Javascript, especially for a beginner like me.<br>Therefore I dive deep into how to specify <code>this</code> may refer to and find a “four-step” rule may be helpful.</p>
<h3 id="“Global”-Rule"><a href="#“Global”-Rule" class="headerlink" title="“Global” Rule"></a>“Global” Rule</h3><p>By default, <code>this</code> refers to the window object(in a browser).So if you use <code>this</code> in an <strong>Undeclared Object</strong>, <code>this</code> refers to thw window object, namely a global variable, it’s very dangerous since you may declare a global variable by default.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="keyword">this</span>) </span><br><span class="line"><span class="comment">// it will print Window Object</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">whatisThis</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addGlobalVar</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">// By using `this` here you will attach a key "person" to global object window</span></span><br><span class="line">    <span class="comment">// You can now use this.person outside the function</span></span><br><span class="line">    <span class="keyword">this</span>.person = <span class="string">"zoulianghao"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(person); <span class="comment">//return "zoulianghao"</span></span><br><span class="line">whatisThis(); <span class="comment">// return Window Object</span></span><br></pre></td></tr></table></figure>

<h5 id="use-strict"><a href="#use-strict" class="headerlink" title="use strict"></a>use strict</h5><p>To fix this horrible mistake, there is a new declaration added in ES5 called <code>use strict</code>. It means<br>the code will run in a strict mode which will not allow unspecified variable.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">this</span>) </span><br><span class="line"><span class="comment">// it will print Window Object</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">whatisThis</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addGlobalVar</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.person = <span class="string">"zoulianghao"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(person); <span class="comment">//it will throw an undefined error</span></span><br><span class="line">whatisThis(); <span class="comment">// return "Undefined"</span></span><br></pre></td></tr></table></figure>

<h3 id="“Nested”-Rule"><a href="#“Nested”-Rule" class="headerlink" title="“Nested” Rule"></a>“Nested” Rule</h3><p>“Nested” Rule means implicit rule (there is explicit rule next). This rule is called when <code>this</code> is nested in a declared object. Then <code>this</code> refer to the <strong>nearest</strong> parent object.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//"use strict" does not make a difference here</span></span><br><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">    firstName: <span class="string">"zoulianghao"</span>,</span><br><span class="line">    sayHi: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"hello"</span>+<span class="keyword">this</span>.firstName);</span><br><span class="line">    &#125;</span><br><span class="line">    testThis: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>=== person</span><br><span class="line">    &#125;</span><br><span class="line">    dog:&#123;</span><br><span class="line">        sayHi: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="comment">// By saying nearest, `this` refer to the dog object</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"hello"</span>+<span class="keyword">this</span>.firstname);</span><br><span class="line">        testThis: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>===person</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">person.sayhi()<span class="comment">// print hello zoulianghao</span></span><br><span class="line">person.testThis() <span class="comment">// return true</span></span><br><span class="line">person.dog.sayhi()<span class="comment">//print hello undefined</span></span><br><span class="line">person.dog.testThis()<span class="comment">//return false</span></span><br></pre></td></tr></table></figure>

<h3 id="Explicit-Rule"><a href="#Explicit-Rule" class="headerlink" title="Explicit Rule"></a>Explicit Rule</h3><p>By saying “Explicit”, I mean we use function <code>apply()</code>,<code>call()</code>,<code>bind()</code> to specify where <code>this</code> refers.<br>|Func|Para|InvokeTime|<br>|:-:|:-:|:-:|<br>|<code>call()</code>|<code>call(Arg, a, b, c)</code>|immediate|<br>|<code>apply()</code>|<code>apply(Arg, [a,b,c])</code>|immediate|<br>|<code>bind()</code>|<code>bind(Arg,a,b,c)</code>|delay|</p>
<p><code>Arg</code> refers to anything you what <code>this</code> refers to. <code>a,b,c...</code>refers to the possible parameters you want to pass.</p>
<h5 id="call-and-apply"><a href="#call-and-apply" class="headerlink" title="call() and apply()"></a><code>call()</code> and <code>apply()</code></h5><p>Let’s fix the <code>dog.sayHi()</code> method using <code>call()</code> and <code>apply()</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="comment">// by using call(person), we specify "this" as person object</span></span><br><span class="line">person.dog.sayHi.call(person)<span class="comment">// return hello zouliangho</span></span><br><span class="line">person.dog.testThis.call(person)<span class="comment">// return true</span></span><br></pre></td></tr></table></figure>

<p>Anothor Common use of <code>call()</code> is to simplify your code.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> zou = &#123;</span><br><span class="line">    firstname: zou,</span><br><span class="line">    lastname: lianghao,</span><br><span class="line">    sayhi: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"hello"</span>+<span class="keyword">this</span>.firstname+<span class="keyword">this</span>.lastname);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> pan = &#123;</span><br><span class="line">    firstname: feng,</span><br><span class="line">    lastname: pan,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// By using call, we do not need to define sayhi() in pan object</span></span><br><span class="line">zou.sayhi() <span class="comment">// print hello zoulianghao</span></span><br><span class="line">zou.sayhi.call(zhao) <span class="comment">// print hello panfeng</span></span><br></pre></td></tr></table></figure>

<p>As for <code>apply()</code>, it is almost identical, just the parameters. It passes an array as parameters to the function.</p>
<h5 id="bind"><a href="#bind" class="headerlink" title="bind()"></a><code>bind()</code></h5><p><code>bind()</code> is used for async codes. Different from <code>call()</code> to invoke immediately, <code>bind()</code> returns a function with the context of <code>this</code> bound to it already. And it can be called later. This feature is helpful when you do not know all the parameters yet.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> zou = &#123;</span><br><span class="line">    firstName: Lianghao,</span><br><span class="line">    calculate: <span class="function"><span class="keyword">function</span>(<span class="params">a,b</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.firstname + <span class="string">" just calculated "</span>+ (a+b) </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> pan = &#123;</span><br><span class="line">    firstName: Feng,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// zou.calculate() needs two params, by using bind() you can pass one and then pass another one</span></span><br><span class="line"><span class="keyword">var</span> pan_cal = zou.calculate.bind(pan,<span class="number">1</span>);<span class="comment">// bind() returns a function definition</span></span><br><span class="line">pan_cal(<span class="number">2</span>) <span class="comment">// return Feng just calculated 3</span></span><br></pre></td></tr></table></figure>

<p>To use <code>bind()</code> in async codes may be a very tricky problem. You may mess up with <code>this</code> very easy.<br>Here is a classical mistake many may encounter</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> zou = &#123;</span><br><span class="line">    firstName: Lianghao,</span><br><span class="line">    sayHi: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        setTimeout(<span class="function"><span class="keyword">function</span></span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"HELLO"</span>+ <span class="keyword">this</span>.firstName);</span><br><span class="line">        &#125;,<span class="number">2000</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>You may assume when I call <code>zou.sayHi()</code> it will print “Hello Lianghao” after 2s. However it will just print “HELLO Undefined”. Because it is async code so when the function is executed, <code>this</code> will refer to the window object. To solve this problem, we can use <code>bind()</code>, remember, <code>apply()</code> and <code>call()</code> is invoked immediately so they won’t work here.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> zou = &#123;</span><br><span class="line">    firstName: Lianghao,</span><br><span class="line">    sayHi: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        setTimeout(<span class="function"><span class="keyword">function</span></span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"HELLO"</span>+ <span class="keyword">this</span>.firstName);</span><br><span class="line">        &#125;.bind(<span class="keyword">this</span>),<span class="number">2000</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// by adding .bind(this), we bind "this" to function, and "this" at this time refers to its nested parent</span></span><br><span class="line"><span class="comment">// so it refers to zou right now.</span></span><br><span class="line">zou.sayHi()<span class="comment">// it will print HELLO Lianghao in 2s</span></span><br></pre></td></tr></table></figure>

<h3 id="“New”-Rule"><a href="#“New”-Rule" class="headerlink" title="“New” Rule"></a>“New” Rule</h3><p><code>New</code> is a reserved keyword to set the context of <code>this</code>. It provides more powerful function than the previous functions. To put it in a simple way, <code>new</code> will create a object, and set the <code>this</code> to the object</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">person</span>(<span class="params">fistname, lastname</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.firstname =firstname</span><br><span class="line">    <span class="keyword">this</span>.lastname = lastname</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// At this point "this" refers to the global object</span></span><br><span class="line"><span class="keyword">var</span> zou = <span class="keyword">new</span> person(<span class="string">"Lianghao"</span>,<span class="string">"zou"</span>)</span><br><span class="line"><span class="built_in">console</span>.log(zou.firstname)<span class="comment">//print Lianghao</span></span><br><span class="line"><span class="built_in">console</span>.log(zou.lastname)<span class="comment">// print zou</span></span><br></pre></td></tr></table></figure>

<p><code>new</code> may involve much more about OOP and prototype.<br>About OOP and prototype, to be continued.</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://zlhhhhhhh.github.io/2019/08/27/2019-03-25-Leetcod-Stack/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lianghao Zou">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://images.unsplash.com/photo-1537815749002-de6a533c64db?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=845&q=80">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lianghao's Writing">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/27/2019-03-25-Leetcod-Stack/" itemprop="url">[LeetCode]Stack And Queue</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-08-27T21:17:17-05:00">
                2019-08-27
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Leetcode-Solution/" itemprop="url" rel="index">
                    <span itemprop="name">Leetcode Solution</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/08/27/2019-03-25-Leetcod-Stack/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/08/27/2019-03-25-Leetcod-Stack/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>学习完leetcode 上的<a href="https://leetcode-cn.com/explore/learn/card/queue-stack/" target="_blank" rel="noopener">栈和队列专题</a>,<br>记录一些比较印象深刻几道题</p>
</blockquote>
<h3 id="字符串解码"><a href="#字符串解码" class="headerlink" title="字符串解码"></a>字符串解码</h3><h5 id="题目说明"><a href="#题目说明" class="headerlink" title="题目说明"></a>题目说明</h5><blockquote>
<p>Given an encoded string, return it’s decoded string.<br>The encoding rule is:<em>k[encoded_string]</em>, where the encoded_string inside the square brackets is &gt;   being repeated exactly k times. Note that k is guaranteed to be a positive integer.<br>You may assume that the input string is always valid; No extra white spaces, square brackets are &gt;   well-formed, etc.<br>Furthermore, you may assume that the original data does not contain any digits and that digits &gt;   are only for those repeat numbers, k. For example, there won’t be input like 3a or 2[4].</p>
</blockquote>
<h5 id="解决代码"><a href="#解决代码" class="headerlink" title="解决代码"></a>解决代码</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">decodeString</span><span class="params">(self, s: str)</span> -&gt; str:</span></span><br><span class="line">        <span class="keyword">if</span> s == <span class="string">''</span><span class="keyword">or</span> s.isalpha():</span><br><span class="line">            <span class="keyword">return</span> s</span><br><span class="line">        num_stack = []</span><br><span class="line">        char_stack = []</span><br><span class="line">        cnt = <span class="number">0</span></span><br><span class="line">        temp = <span class="string">''</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(s)):</span><br><span class="line">            <span class="keyword">if</span> s[i].isdigit():</span><br><span class="line">                cnt = cnt*<span class="number">10</span> + int(s[i])</span><br><span class="line">            <span class="keyword">elif</span> s[i] == <span class="string">'['</span>:</span><br><span class="line">                num_stack.append(cnt)</span><br><span class="line">                char_stack.append(temp)</span><br><span class="line">                cnt =<span class="number">0</span></span><br><span class="line">                temp = <span class="string">''</span></span><br><span class="line">            <span class="keyword">elif</span> s[i] == <span class="string">']'</span>:</span><br><span class="line">                num = num_stack.pop()</span><br><span class="line">                s1 = char_stack.pop()</span><br><span class="line">                s1 += temp*num</span><br><span class="line">                temp = s1</span><br><span class="line">            <span class="keyword">elif</span> s[i].isalpha():</span><br><span class="line">                temp += s[i]</span><br><span class="line">        <span class="keyword">return</span> temp</span><br></pre></td></tr></table></figure>

<h5 id="解决思路"><a href="#解决思路" class="headerlink" title="解决思路"></a>解决思路</h5><p>受到之前在<em>Cousera</em>上看Sedgwick教授的算法课上所讲的Dijkstra双栈实现一个计算式的启发，这道题首先会很自然而然的想到用两个栈来解决。利用两个变量<code>cnt</code>,<code>temp</code>来分别记录重复次数和重复的字符串。</p>
<ul>
<li>判断是否为数字，如果为数字则更新cnt</li>
<li>判断是否为字符，如果未字符则更新temp</li>
<li>遇到左括号，数字和字符进栈，初始化cnt和temp</li>
<li>遇到右括号，数字和字符出栈，组合成新的字符串后更新temp</li>
</ul>
<h3 id="队列实现栈"><a href="#队列实现栈" class="headerlink" title="队列实现栈"></a>队列实现栈</h3><h5 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h5><blockquote>
<p>Implement the following operations of a stack using queues.</p>
</blockquote>
<blockquote>
<p>push(x) – Push element x onto stack.<br>pop() – Removes the element on top of the stack.<br>top() – Get the top element.<br>empty() – Return whether the stack is empty.</p>
<p><strong>Example:</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; MyStack stack = new MyStack();</span><br><span class="line">&gt;</span><br><span class="line">&gt; stack.push(<span class="number">1</span>);</span><br><span class="line">&gt; stack.push(<span class="number">2</span>);  </span><br><span class="line">&gt; stack.top();   // returns <span class="number">2</span></span><br><span class="line">&gt; stack.pop();   // returns <span class="number">2</span></span><br><span class="line">&gt; stack.empty(); // returns false</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>Notes:<br>You must use only standard operations of a queue – which means only push to back, peek/pop from front, size, and is empty operations are valid.<br>Depending on your language, queue may not be supported natively. You may simulate a queue by using a list or deque (double-ended queue), as long as you use only standard operations of a queue.<br>You may assume that all operations are valid (for example, no pop or top operations will be called on an empty stack).</p>
</blockquote>
<h5 id="解决代码-1"><a href="#解决代码-1" class="headerlink" title="解决代码"></a>解决代码</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyStack</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        Initialize your data structure here.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        self.queue_1 = []</span><br><span class="line">        self.queue_2 = []</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">push</span><span class="params">(self, x: int)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        Push element x onto stack.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="comment">#用两个队列，入栈时先将原有的倒入另一个队列里，然后再倒回来</span></span><br><span class="line">        <span class="keyword">while</span>(len(self.queue_1)!=<span class="number">0</span>):</span><br><span class="line">            self.queue_2.append(self.queue_1.pop(<span class="number">0</span>))</span><br><span class="line">        self.queue_1.append(x)</span><br><span class="line">        <span class="keyword">while</span>(len(self.queue_2)!=<span class="number">0</span>):</span><br><span class="line">            self.queue_1.append(self.queue_2.pop(<span class="number">0</span>))</span><br><span class="line">            </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">pop</span><span class="params">(self)</span> -&gt; int:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        Removes the element on top of the stack and returns that element.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="string">'''</span></span><br><span class="line"><span class="string">        if len(self.queue_1)!=0:</span></span><br><span class="line"><span class="string">            while(len(self.queue_1)&gt;0):</span></span><br><span class="line"><span class="string">                temp = self.queue_1.pop(0)</span></span><br><span class="line"><span class="string">                if len(self.queue_1)&gt;0:</span></span><br><span class="line"><span class="string">                    self.queue_2.append(temp)</span></span><br><span class="line"><span class="string">        elif len(self.queue_2)!=0:</span></span><br><span class="line"><span class="string">            while(len(self.queue_2)&gt;0):</span></span><br><span class="line"><span class="string">                temp = self.queue_2.pop(0)#pop from front</span></span><br><span class="line"><span class="string">                if len(self.queue_2)&gt;0:</span></span><br><span class="line"><span class="string">                    self.queue_2.append(temp)</span></span><br><span class="line"><span class="string">        return temp</span></span><br><span class="line"><span class="string">                </span></span><br><span class="line"><span class="string">        '''</span></span><br><span class="line">        <span class="keyword">return</span> self.queue_1.pop(<span class="number">0</span>)</span><br><span class="line">                </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">top</span><span class="params">(self)</span> -&gt; int:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        Get the top element.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">return</span> self.queue_1[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">empty</span><span class="params">(self)</span> -&gt; bool:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        Returns whether the stack is empty.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span> <span class="keyword">if</span> <span class="keyword">not</span> len(self.queue_1) <span class="keyword">else</span> <span class="literal">False</span></span><br></pre></td></tr></table></figure>

<h5 id="解决思路-1"><a href="#解决思路-1" class="headerlink" title="解决思路"></a>解决思路</h5><p>之前一道题是用栈来实现队列的，用的是两个栈，思路就是把一个栈直接倒出来，那么最早进来的就会在最上面。这里很自然的想到用两个队列来做。入栈的时候把已经存在的元素倒进另一个队列里，次序不会变，然后在剩下的空队里入队这个目标元素，然后再从另一个队里把之前的给倒回来。</p>
<h3 id="01矩阵"><a href="#01矩阵" class="headerlink" title="01矩阵"></a>01矩阵</h3><h5 id="题目描述-1"><a href="#题目描述-1" class="headerlink" title="题目描述"></a>题目描述</h5><blockquote>
<p>Given a matrix consists of 0 and 1, find the distance of the nearest 0 for each cell.<br>The distance between two adjacent cells is 1.</p>
</blockquote>
<p><strong>Example 1:</strong><br>Input:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">0 0 0</span><br><span class="line">0 1 0</span><br><span class="line">0 0 0</span><br></pre></td></tr></table></figure>

<p>Output:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">0 0 0</span><br><span class="line">0 1 0</span><br><span class="line">0 0 0</span><br></pre></td></tr></table></figure>

<p><strong>Example 2:</strong><br>Input:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">0 0 0</span><br><span class="line">0 1 0</span><br><span class="line">1 1 1</span><br></pre></td></tr></table></figure>

<p>Output:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">0 0 0</span><br><span class="line">0 1 0</span><br><span class="line">1 2 1</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Note:<br>The number of elements of the given matrix will not exceed 10,000.<br>There are at least one 0 in the given matrix.<br>The cells are adjacent in only four directions: up, down, left and right.</p>
</blockquote>
<h5 id="解决代码-2"><a href="#解决代码-2" class="headerlink" title="解决代码"></a>解决代码</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">updateMatrix</span><span class="params">(self, matrix: List[List[int]])</span> -&gt; List[List[int]]:</span></span><br><span class="line">        dirs = [[<span class="number">0</span>, <span class="number">1</span>], [<span class="number">1</span>, <span class="number">0</span>], [<span class="number">-1</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">-1</span>]]</span><br><span class="line">        row = len(matrix)</span><br><span class="line">        col = len(matrix[<span class="number">0</span>])</span><br><span class="line">        queue = list()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 更新矩阵，0则入队，1则设置为无穷大</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(row):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(col):</span><br><span class="line">                <span class="keyword">if</span> matrix[i][j] == <span class="number">0</span>:</span><br><span class="line">                    queue.append([i,j])</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    matrix[i][j] = float(<span class="string">'inf'</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(len(queue)):</span><br><span class="line">            [m,n] = queue.pop(<span class="number">0</span>)</span><br><span class="line">            <span class="keyword">for</span> dir <span class="keyword">in</span> dirs:</span><br><span class="line">                x, y = m + dir[<span class="number">0</span>], n+ dir[<span class="number">1</span>]</span><br><span class="line">                <span class="keyword">if</span> x&lt;<span class="number">0</span> <span class="keyword">or</span> y&lt;<span class="number">0</span> <span class="keyword">or</span> x&gt;=row <span class="keyword">or</span> y&gt;=col <span class="keyword">or</span> matrix[x][y]&lt;=matrix[m][n]+<span class="number">1</span>:</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line">                matrix[x][y] = matrix[m][n]+<span class="number">1</span></span><br><span class="line">                queue.append([x,y])</span><br><span class="line">        <span class="keyword">return</span> matrix</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://zlhhhhhhh.github.io/2019/08/27/2019-01-12-Leetcode-BFS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lianghao Zou">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://images.unsplash.com/photo-1537815749002-de6a533c64db?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=845&q=80">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lianghao's Writing">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/27/2019-01-12-Leetcode-BFS/" itemprop="url">[LeetCode]关于广度优先搜索</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-08-27T12:23:29-05:00">
                2019-08-27
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Leetcode-Solution/" itemprop="url" rel="index">
                    <span itemprop="name">Leetcode Solution</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/08/27/2019-01-12-Leetcode-BFS/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/08/27/2019-01-12-Leetcode-BFS/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <br>

<h2 id="关于广度优先搜索"><a href="#关于广度优先搜索" class="headerlink" title="关于广度优先搜索"></a>关于广度优先搜索</h2><p>广度优先搜索(BFS)是一种用于遍历图的算法，一般用来解决的问题有两个</p>
<ul>
<li>有没有一条路径能够从A到B</li>
<li>从A到B的最短路径是什么</li>
</ul>
<p>BFS的算法的空间复杂度为<code>O(|V|+|E|)</code> V是图中节点的数目，E是图中边的数目，时间复杂度也为<code>O(|V|+|E|)</code> ，最差的情况下BFS必须找完所有的边和节点，所以BFS并不适合大型的问题</p>
<p>使用队列实现BFS，伪代码如下</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">return the shortest distance between the given node and target node </span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">BFS</span><span class="params">(root,target)</span>:</span></span><br><span class="line">    res_que = list();</span><br><span class="line">    res_que.append([<span class="number">0</span>,root])</span><br><span class="line">    <span class="keyword">while</span> len(res_que) != <span class="number">0</span>:</span><br><span class="line">        size = len(res_que)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(size):</span><br><span class="line">            [size,temp] = res_que.pop(<span class="number">0</span>)</span><br><span class="line">            <span class="keyword">if</span> temp == target:</span><br><span class="line">                <span class="keyword">return</span> size</span><br><span class="line">            <span class="keyword">for</span> (temp1 <span class="keyword">in</span> temp.neighbos):</span><br><span class="line">                res_que.append([size+<span class="number">1</span>,temp1])</span><br><span class="line">     <span class="keyword">return</span> <span class="number">-1</span></span><br></pre></td></tr></table></figure>

<p>在做题的时候，很多时候要保证我们永远不会<strong>访问一个点两次</strong>，所以常常我们会维护一个<code>visited</code>的<code>set</code>类型的表，用来表示访问过的点，因为BFS在图足够大的情况下，是不会收敛的，即不会结束。</p>
<h3 id="Walls-and-Gates"><a href="#Walls-and-Gates" class="headerlink" title="Walls and Gates"></a>Walls and Gates</h3><h5 id="题目说明"><a href="#题目说明" class="headerlink" title="题目说明"></a>题目说明</h5><blockquote>
<p>You are given a <em>m x n</em> 2D grid initialized with these three possible values.</p>
<ol>
<li><code>-1</code> - A wall or an obstacle.</li>
<li><code>0</code> - A gate.</li>
<li><code>INF</code> - Infinity means an empty room. We use the value <code>231 - 1 = 2147483647</code> to represent <code>INF</code> as you may assume that the distance to a gate is less than <code>2147483647</code>.</li>
</ol>
<p>Fill each empty room with the distance to its <em>nearest</em> gate. If it is impossible to reach a gate, it should be filled with <code>INF</code>.</p>
<p>For example, given the 2D grid:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; INF  -<span class="number">1</span>  <span class="number">0</span>  INF</span><br><span class="line">&gt; </span><br><span class="line">&gt; INF INF INF  -<span class="number">1</span></span><br><span class="line">&gt; </span><br><span class="line">&gt; INF  -<span class="number">1</span> INF  -<span class="number">1</span></span><br><span class="line">&gt; </span><br><span class="line">&gt;   <span class="number">0</span>  -<span class="number">1</span> INF INF</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>After running your function, the 2D grid should be:</p>
</blockquote>
<blockquote>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;   3  -1   0   1</span><br><span class="line">&gt;   2   2   1  -1</span><br><span class="line">&gt;   1  -1   2  -1</span><br><span class="line">&gt;   0  -1   3   4</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<h5 id="解决代码"><a href="#解决代码" class="headerlink" title="解决代码"></a>解决代码</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wallandgates</span><span class="params">(self, rooms)</span>:</span></span><br><span class="line">        <span class="comment">#size = len(rooms)</span></span><br><span class="line">        res_queue = []</span><br><span class="line">        dir = [[<span class="number">-1</span>,<span class="number">0</span>],[<span class="number">0</span>,<span class="number">-1</span>],[<span class="number">1</span>,<span class="number">0</span>],[<span class="number">0</span>,<span class="number">1</span>]]</span><br><span class="line"></span><br><span class="line">        <span class="comment">#遍历一遍找到门</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>,len(rooms)):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">0</span>,len(rooms[i])):</span><br><span class="line">                <span class="keyword">if</span> rooms[i][j] == <span class="number">0</span>:</span><br><span class="line">                    res_queue.append([i,j])</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(len(res_queue)!=<span class="number">0</span>):</span><br><span class="line">            m = res_queue[<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line">            n = res_queue[<span class="number">0</span>][<span class="number">1</span>]</span><br><span class="line">            res_queue.pop(<span class="number">0</span>)</span><br><span class="line">            <span class="keyword">for</span> k <span class="keyword">in</span> range(<span class="number">0</span>,len(dir)):</span><br><span class="line">                x = m + dir[k][<span class="number">0</span>]</span><br><span class="line">                y = n + dir[k][<span class="number">1</span>]</span><br><span class="line">                <span class="keyword">if</span> x&lt;<span class="number">0</span> <span class="keyword">or</span> y&lt;<span class="number">0</span> <span class="keyword">or</span> x&gt;= len(rooms) <span class="keyword">or</span> y &gt;=len(rooms[<span class="number">0</span>]) <span class="keyword">or</span> rooms[x][y] &lt;= rooms[m][n] + <span class="number">1</span>:</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line">                rooms[x][y] = rooms[m][n] + <span class="number">1</span></span><br><span class="line">                res_queue.append([x,y])</span><br><span class="line">        <span class="keyword">return</span> rooms</span><br></pre></td></tr></table></figure>

<h5 id="解决思路"><a href="#解决思路" class="headerlink" title="解决思路"></a>解决思路</h5><p>关键是如何将一个问题转化为典型的BFS解决的问题，这里的门就是根节点，empty rooms就是目标节点，就是找到根节点和目标节点之间的最短距离，也就是典型的BFS能够解决的问题。</p>
<h3 id="Number-of-Islands"><a href="#Number-of-Islands" class="headerlink" title="Number of Islands"></a>Number of Islands</h3><h5 id="题目说明-1"><a href="#题目说明-1" class="headerlink" title="题目说明"></a>题目说明</h5><blockquote>
<p>Given a 2d grid map of <code>&#39;1&#39;</code>s (land) and <code>&#39;0&#39;</code>s (water), count the number of islands. An island is surrounded by water and is formed by connecting adjacent lands horizontally or vertically. You may assume all four edges of the grid are all surrounded by water.</p>
<p><strong>Example 1:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; Input:</span><br><span class="line">&gt; 11110</span><br><span class="line">&gt; 11010</span><br><span class="line">&gt; 11000</span><br><span class="line">&gt; 00000</span><br><span class="line">&gt; </span><br><span class="line">&gt; Output: 1</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p><strong>Example 2:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; Input:</span><br><span class="line">&gt; 11000</span><br><span class="line">&gt; 11000</span><br><span class="line">&gt; 00100</span><br><span class="line">&gt; 00011</span><br><span class="line">&gt; </span><br><span class="line">&gt; Output: 3</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<h5 id="解决代码-1"><a href="#解决代码-1" class="headerlink" title="解决代码"></a>解决代码</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">numIslands</span><span class="params">(self, grid)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type grid: List[List[str]]</span></span><br><span class="line"><span class="string">        :rtype: int</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">if</span> grid == []:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span> </span><br><span class="line">        count = <span class="number">0</span></span><br><span class="line">        col = len(grid[<span class="number">0</span>])</span><br><span class="line">        row = len(grid)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(row):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(col):</span><br><span class="line">                <span class="keyword">if</span> grid[i][j] == <span class="string">'1'</span>:</span><br><span class="line">                    count += <span class="number">1</span></span><br><span class="line">                    grid = self.helper(row,col,i,j,grid)</span><br><span class="line">        <span class="keyword">return</span> count</span><br><span class="line">                    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">helper</span><span class="params">(self,row,col,i,j,grid)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> i&lt;<span class="number">0</span> <span class="keyword">or</span> i &gt; row<span class="number">-1</span> <span class="keyword">or</span> j&lt;<span class="number">0</span> <span class="keyword">or</span> j&gt;col<span class="number">-1</span> <span class="keyword">or</span> grid[i][j] == <span class="string">'0'</span>:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        </span><br><span class="line">        grid[i][j] = <span class="string">'0'</span></span><br><span class="line">        self.helper(row,col,i+<span class="number">1</span>,j,grid)</span><br><span class="line">        self.helper(row,col,i<span class="number">-1</span>,j,grid)</span><br><span class="line">        self.helper(row,col,i,j+<span class="number">1</span>,grid)</span><br><span class="line">        self.helper(row,col,i,j<span class="number">-1</span>,grid)</span><br><span class="line">        <span class="keyword">return</span> grid</span><br></pre></td></tr></table></figure>

<h5 id="解决思路-1"><a href="#解决思路-1" class="headerlink" title="解决思路"></a>解决思路</h5><p>这个题目有点像之前做的一道flood fill 的题目，感觉并不是用的广度搜索来解决。就是对一个节点找他四周的节点然后不断循环的过程，看资料说有点像深度搜索。</p>
<h3 id="Open-The-Lock"><a href="#Open-The-Lock" class="headerlink" title="Open The Lock"></a>Open The Lock</h3><h5 id="题目说明-2"><a href="#题目说明-2" class="headerlink" title="题目说明"></a>题目说明</h5><blockquote>
<p>You have a lock in front of you with 4 circular wheels. Each wheel has 10 slots: <code>&#39;0&#39;, &#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4&#39;, &#39;5&#39;, &#39;6&#39;, &#39;7&#39;, &#39;8&#39;, &#39;9&#39;</code>. The wheels can rotate freely and wrap around: for example we can turn <code>&#39;9&#39;</code> to be <code>&#39;0&#39;</code>, or <code>&#39;0&#39;</code> to be <code>&#39;9&#39;</code>. Each move consists of turning one wheel one slot.</p>
<p>The lock initially starts at <code>&#39;0000&#39;</code>, a string representing the state of the 4 wheels.</p>
<p>You are given a list of <code>deadends</code> dead ends, meaning if the lock displays any of these codes, the wheels of the lock will stop turning and you will be unable to open it.</p>
<p>Given a <code>target</code> representing the value of the wheels that will unlock the lock, return the minimum total number of turns required to open the lock, or -1 if it is impossible.</p>
<p><strong>Example 1:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt; Input: deadends = [&quot;0201&quot;,&quot;0101&quot;,&quot;0102&quot;,&quot;1212&quot;,&quot;2002&quot;], target = &quot;0202&quot;</span><br><span class="line">&gt; Output: 6</span><br><span class="line">&gt; Explanation:</span><br><span class="line">&gt; A sequence of valid moves would be &quot;0000&quot; -&gt; &quot;1000&quot; -&gt; &quot;1100&quot; -&gt; &quot;1200&quot; -&gt; &quot;1201&quot; -&gt; &quot;1202&quot; -&gt; &quot;0202&quot;.</span><br><span class="line">&gt; Note that a sequence like &quot;0000&quot; -&gt; &quot;0001&quot; -&gt; &quot;0002&quot; -&gt; &quot;0102&quot; -&gt; &quot;0202&quot; would be invalid,</span><br><span class="line">&gt; because the wheels of the lock become stuck after the display becomes the dead end &quot;0102&quot;.</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p><strong>Example 2:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; Input: deadends = [&quot;8888&quot;], target = &quot;0009&quot;</span><br><span class="line">&gt; Output: 1</span><br><span class="line">&gt; Explanation:</span><br><span class="line">&gt; We can turn the last wheel in reverse to move from &quot;0000&quot; -&gt; &quot;0009&quot;.</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p><strong>Example 3:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; Input: deadends = [&quot;8887&quot;,&quot;8889&quot;,&quot;8878&quot;,&quot;8898&quot;,&quot;8788&quot;,&quot;8988&quot;,&quot;7888&quot;,&quot;9888&quot;], target = &quot;8888&quot;</span><br><span class="line">&gt; Output: -1</span><br><span class="line">&gt; Explanation:</span><br><span class="line">&gt; We can&apos;t reach the target without getting stuck.</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p><strong>Example 4:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; Input: deadends = [&quot;0000&quot;], target = &quot;8888&quot;</span><br><span class="line">&gt; Output: -1</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p><strong>Note:</strong></p>
<ol>
<li>The length of <code>deadends</code> will be in the range <code>[1, 500]</code>.</li>
<li><code>target</code> will not be in the list <code>deadends</code>.</li>
<li>Every string in <code>deadends</code> and the string <code>target</code> will be a string of 4 digits from the 10,000 possibilities <code>&#39;0000&#39;</code> to <code>&#39;9999&#39;</code>  </li>
</ol>
</blockquote>
<h5 id="解决代码-2"><a href="#解决代码-2" class="headerlink" title="解决代码"></a>解决代码</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">openLock</span><span class="params">(self, deadends, target)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type deadends: List[str]</span></span><br><span class="line"><span class="string">        :type target: str</span></span><br><span class="line"><span class="string">        :rtype: int</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="comment"># 建立队列储存当前节点和深度</span></span><br><span class="line">        res_queue = [[<span class="number">0</span>, <span class="string">"0000"</span>]]</span><br><span class="line">        visited = set([<span class="string">"0000"</span>])</span><br><span class="line">        deadends = set(deadends)</span><br><span class="line">        depth_min = float(<span class="string">"inf"</span>)</span><br><span class="line">        c1 = ord(<span class="string">'9'</span>) + <span class="number">1</span></span><br><span class="line">        c2 = ord(<span class="string">'0'</span>) - <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="string">"0000"</span> <span class="keyword">in</span> deadends:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (len(res_queue) != <span class="number">0</span>):</span><br><span class="line">            <span class="comment"># 取出第一个元素</span></span><br><span class="line">            temp = res_queue.pop(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># 如果当前节点为目标节点且深度小于最小深度，则更新深度为当前深度</span></span><br><span class="line">            <span class="keyword">if</span> float(temp[<span class="number">0</span>] )&lt; (depth_min) <span class="keyword">and</span> temp[<span class="number">1</span>] == target:</span><br><span class="line">                depth_min = temp[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">            <span class="comment"># 如果当前的深度比最小深度还要大，那么就直接结束（剪枝操作)</span></span><br><span class="line">            <span class="keyword">if</span> float(temp[<span class="number">0</span>]) &gt; depth_min:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">4</span>):</span><br><span class="line"></span><br><span class="line">                temp_add = temp[<span class="number">1</span>]</span><br><span class="line">                temp_sub = temp[<span class="number">1</span>]</span><br><span class="line">                temp_add = temp_add[:i] + chr(ord(temp_add[i]) + <span class="number">1</span>) + temp_add[i+<span class="number">1</span>:]</span><br><span class="line">                temp_sub = temp_sub[:i] + chr(ord(temp_sub[i]) - <span class="number">1</span>) + temp_sub[i+<span class="number">1</span>:]</span><br><span class="line">                <span class="keyword">if</span> ord(temp_add[i])  == c1:</span><br><span class="line">                    temp_add = temp_add[:i] + <span class="string">'0'</span> + temp_add[i + <span class="number">1</span>:]</span><br><span class="line">                <span class="keyword">if</span> ord(temp_sub[i])   == c2:</span><br><span class="line">                    temp_sub = temp_sub[:i] + <span class="string">'9'</span> + temp_sub[i + <span class="number">1</span>:]</span><br><span class="line">                <span class="keyword">if</span> temp_add <span class="keyword">not</span> <span class="keyword">in</span> deadends <span class="keyword">and</span> temp_add <span class="keyword">not</span> <span class="keyword">in</span> visited:</span><br><span class="line">                    res_queue.append([temp[<span class="number">0</span>]+<span class="number">1</span>,temp_add])</span><br><span class="line">                    visited.add(temp_add)</span><br><span class="line">                <span class="keyword">if</span> temp_sub <span class="keyword">not</span> <span class="keyword">in</span> deadends <span class="keyword">and</span> temp_sub <span class="keyword">not</span> <span class="keyword">in</span> visited:</span><br><span class="line">                    res_queue.append( [temp[<span class="number">0</span>]+<span class="number">1</span>,temp_sub])</span><br><span class="line">                    visited.add(temp_sub)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> depth_min <span class="keyword">if</span> depth_min != float(<span class="string">"inf"</span>) <span class="keyword">else</span> <span class="number">-1</span></span><br></pre></td></tr></table></figure>

<h5 id="解决思路-2"><a href="#解决思路-2" class="headerlink" title="解决思路"></a>解决思路</h5><p>我觉得对于我这个初学者来说，这道题真的特别有意思，因为我自己之前就玩过类似的转盘游戏，但是那时候没想过还可以用代码来解决。题目大体意思是说有一个密码锁，表盘上有四个数字，你可以自由转动，0过后就可以转回9，反之亦然。不过会有一些dead ends，就是表盘不能转到对应的位置。</p>
<p>这是很经典的BFS解决的题目，可以把转盘中每一种状态想象成图中的节点，根节点就是<code>0000</code>，目标节点就是终止状态，你需要找到最短路径。这里直接暴力的用BFS遍历应该是会超时的，所以要加入剪枝操作，也即如果当前的节点的深度大于之前记录的深度的话，那就跳出循环，这样会节约一些时间。同时，我被如何解决0-&gt;9这个小问题困扰了很久，最后选择直接转换成ascii码计算完再重新赋值。同时要注意python的字符串不能利用索引直接对字符串修改，例如<del><code>temp_add[i] = &#39;0&#39;</code></del> ，所以如果想要根据索引修改字符串的对应字符这里用了知乎上的一个方法<code>temp_add = temp[:i]+&#39;0&#39;+ temp_add[i+1:]</code>,利用切片的方法，就解决了。</p>
<h3 id="Perfect-Squares"><a href="#Perfect-Squares" class="headerlink" title="Perfect Squares"></a>Perfect Squares</h3><h5 id="题目说明-3"><a href="#题目说明-3" class="headerlink" title="题目说明"></a>题目说明</h5><blockquote>
<p>Given a positive integer <em>n</em>, find the least number of perfect square numbers (for example, <code>1, 4, 9, 16, ...</code>) which sum to <em>n</em>.</p>
<p><strong>Example 1:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; Input: n = 12</span><br><span class="line">&gt; Output: 3 </span><br><span class="line">&gt; Explanation: 12 = 4 + 4 + 4.</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p><strong>Example 2:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; Input: n = 13</span><br><span class="line">&gt; Output: 2</span><br><span class="line">&gt; Explanation: 13 = 4 + 9.</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<h5 id="解决代码-3"><a href="#解决代码-3" class="headerlink" title="解决代码"></a>解决代码</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">numSquares</span><span class="params">(self, n)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type n: int</span></span><br><span class="line"><span class="string">        :rtype: int</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        res = list()</span><br><span class="line">        res.append([<span class="number">0</span>,n])</span><br><span class="line">        visited = set([])</span><br><span class="line">        visited.add(n)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span>(len(res) != <span class="number">0</span> ):</span><br><span class="line">            temp = res.pop(<span class="number">0</span>)</span><br><span class="line">            </span><br><span class="line">            x = temp[<span class="number">1</span>] <span class="number">-1</span> </span><br><span class="line">            step = temp[<span class="number">0</span>] </span><br><span class="line">            i = <span class="number">1</span></span><br><span class="line">            </span><br><span class="line">            <span class="keyword">while</span>(x &gt;= <span class="number">0</span>):</span><br><span class="line">                <span class="keyword">if</span> x == <span class="number">0</span>:</span><br><span class="line">                    <span class="keyword">return</span> step + <span class="number">1</span></span><br><span class="line">                <span class="keyword">if</span> x <span class="keyword">not</span> <span class="keyword">in</span> visited:</span><br><span class="line">                    res.append([step+<span class="number">1</span>,x])</span><br><span class="line">                    visited.add(x)</span><br><span class="line">                i += <span class="number">1</span></span><br><span class="line">                x = temp[<span class="number">1</span>] - i**<span class="number">2</span></span><br></pre></td></tr></table></figure>

<h5 id="解决思路-3"><a href="#解决思路-3" class="headerlink" title="解决思路"></a>解决思路</h5><p>这里首先说一下一个很容易踩的坑，就是利用贪心算法，一直找最大的完全平方数。我一开始想当然的理解为所找到的平方数最大，那么所用的数量就会是最小。看过大家的解答才发现大家都踩了这个坑Orz. 我也不知道该怎么从数学上反驳这个想法，但是举个反例还是很简答的: <code>12 = 4 + 4 + 4</code>但是按之前的想法会拆解成 <code>12 = 9 + 1 + 1 + 1</code> </p>
<p>那么回到这个题目，首先我们考虑用BFS来做的话就需要找到对应要找的距离，最少的平方数的个数也即对应着最短的距离。根节点往下第一层就是<code>n-1</code>,<code>n-4</code> 等距离根节点一个完全平方数距离的，然后对应计算小于n的其他数的深度，直到零为止。</p>
<p><strong>但是</strong> ，看完网上的答案以后发现了更加简单的答案(给数学大佬跪了), 根据<a href="https://baike.baidu.com/item/%E5%9B%9B%E5%B9%B3%E6%96%B9%E6%95%B0%E5%92%8C%E5%AE%9A%E7%90%86/18906811?fr=aladdin" target="_blank" rel="noopener"><em>四平方定理</em></a> ,（反正我也不会证）任意正整数都能表达成不超过四个整数的平方和的形式，换言之，这道题目的返回值只能有四种情况, <code>1,2,3,4</code> .<strong>有一个</strong>很重要的推论, <strong>再有</strong>如果一个整数除以8余数为7的话，他一定可以写成4个完全平方数的和，至于为什么，Emmmm…. 有了这些先验的数论知识，我们的代码变成了这样</p>
<blockquote>
<p>  if and only if n is not of the form n=4a(8b+7) n = 4^a(8b + 7)n=4 ^a (8b+7) for integers a and b.</p>
<p>满足四数平方和定理的数n（这里要满足由四个数构成，小于四个不行），必定满足 </p>
<p><code>n=4a(8b+7) n = 4^a(8b + 7)n</code></p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">numSquares</span><span class="params">(self, n)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type n: int</span></span><br><span class="line"><span class="string">        :rtype: int</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">while</span> n%<span class="number">4</span> == <span class="number">0</span>:</span><br><span class="line">            n = n%<span class="number">4</span></span><br><span class="line">        <span class="keyword">if</span> n%<span class="number">8</span> == <span class="number">7</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">4</span></span><br><span class="line">        a = <span class="number">1</span> </span><br><span class="line">        <span class="keyword">while</span> a**<span class="number">2</span> &lt;= n:</span><br><span class="line">            b = int((n-a**<span class="number">2</span>)**<span class="number">0.5</span>)</span><br><span class="line">            <span class="keyword">if</span> a**<span class="number">2</span> + b**<span class="number">2</span> == n:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">not</span> <span class="keyword">not</span> a + <span class="keyword">not</span> <span class="keyword">not</span> b</span><br><span class="line">            a+=<span class="number">1</span></span><br><span class="line">         <span class="keyword">return</span> <span class="number">3</span></span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://zlhhhhhhh.github.io/2019/08/26/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lianghao Zou">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://images.unsplash.com/photo-1537815749002-de6a533c64db?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=845&q=80">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lianghao's Writing">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/26/hello-world/" itemprop="url">Hello World</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-08-26T19:07:15-05:00">
                2019-08-26
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/08/26/hello-world/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/08/26/hello-world/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>test<br>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="https://images.unsplash.com/photo-1537815749002-de6a533c64db?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=845&q=80" alt="Lianghao Zou">
            
              <p class="site-author-name" itemprop="name">Lianghao Zou</p>
              <p class="site-description motion-element" itemprop="description">A Beliver in Simple Code</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">categories</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">9</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/zlhhhhhhh" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="frankzoulh3@gmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.zhihu.com/people/zlhhhhhh/activities" target="_blank" title="zhihu">
                      
                        <i class="fa fa-fw fa-globe"></i>zhihu</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.instagram.com/frankzoulh3/" target="_blank" title="Instagram">
                      
                        <i class="fa fa-fw fa-instagram"></i>Instagram</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Lianghao Zou</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.4</div>



<!-- 新增访客统计代码 -->
<div class="busuanzi-count">
    <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="site-uv">
      <i class="fa fa-user"></i>
      访问用户： <span class="busuanzi-value" id="busuanzi_value_site_uv"></span> 人
    </span>
    <div class="powered-by"></div>
    <span class="site-uv">
      <i class="fa fa-eye"></i>
      访问次数： <span class="busuanzi-value" id="busuanzi_value_site_pv"></span> 次
    </span>
    <!-- 博客字数统计 -->
    <span class="site-pv">
      <i class="fa fa-pencil"></i>
      博客全站共： <span class="post-count">4.7k</span> 字
    </span>
</div>
<!-- 新增访客统计代码 END-->

        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  

    
      <script id="dsq-count-scr" src="https://zlhhhh.disqus.com/count.js" async></script>
    

    

  




	





  














  





  

  

  

  
  

  

  

  

</body>
</html>
